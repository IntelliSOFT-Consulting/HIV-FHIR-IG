{
  "resourceType": "Measure",
  "id": "HIVIND29",
  "meta": {
    "profile": [ "http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/proportion-measure-cqfm", "http://hl7.org/fhir/uv/crmi/StructureDefinition/crmi-shareablemeasure", "http://hl7.org/fhir/uv/crmi/StructureDefinition/crmi-publishablemeasure", "http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/computable-measure-cqfm" ]
  },
  "contained": [ {
    "resourceType": "Library",
    "id": "effective-data-requirements",
    "extension": [ {
      "url": "http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-directReferenceCode",
      "valueCoding": {
        "system": "http://smart.who.int/hiv/CodeSystem/HIVConcepts",
        "code": "HIV.B.DE116",
        "display": "HIV-positive"
      }
    }, {
      "url": "http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-directReferenceCode",
      "valueCoding": {
        "system": "http://terminology.hl7.org/CodeSystem/condition-clinical",
        "code": "active"
      }
    }, {
      "url": "http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-directReferenceCode",
      "valueCoding": {
        "system": "http://terminology.hl7.org/CodeSystem/condition-category",
        "code": "encounter-diagnosis",
        "display": "Encounter Diagnosis"
      }
    }, {
      "url": "http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-directReferenceCode",
      "valueCoding": {
        "system": "http://smart.who.int/hiv/CodeSystem/HIVConcepts",
        "code": "HIV.B.DE115",
        "display": "HIV status"
      }
    }, {
      "url": "http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-directReferenceCode",
      "valueCoding": {
        "system": "http://smart.who.int/hiv/CodeSystem/HIVConcepts",
        "code": "HIV.H.DE47",
        "display": "On ART"
      }
    }, {
      "url": "http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-directReferenceCode",
      "valueCoding": {
        "system": "http://smart.who.int/hiv/CodeSystem/HIVConcepts",
        "code": "HIV.D.DE38",
        "display": "On ART"
      }
    }, {
      "url": "http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-directReferenceCode",
      "valueCoding": {
        "system": "http://smart.who.int/hiv/CodeSystem/HIVConcepts",
        "code": "HIV.D.DE387",
        "display": "Viral load test result"
      }
    }, {
      "url": "http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-directReferenceCode",
      "valueCoding": {
        "system": "missing concepts",
        "code": "viral load test"
      }
    }, {
      "url": "http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-directReferenceCode",
      "valueCoding": {
        "system": "http://smart.who.int/hiv/CodeSystem/HIVConcepts",
        "code": "HIV.D.DE392",
        "display": "Routine viral load test"
      }
    }, {
      "url": "http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-directReferenceCode",
      "valueCoding": {
        "system": "http://smart.who.int/hiv/CodeSystem/HIVConcepts",
        "code": "HIV.A.DE20",
        "display": "Male"
      }
    }, {
      "url": "http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-directReferenceCode",
      "valueCoding": {
        "system": "http://smart.who.int/hiv/CodeSystem/HIVConcepts",
        "code": "HIV.A.DE19",
        "display": "Female"
      }
    }, {
      "url": "http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-directReferenceCode",
      "valueCoding": {
        "system": "http://smart.who.int/hiv/CodeSystem/HIVConcepts",
        "code": "HIV.A.DE22",
        "display": "Transgender female"
      }
    }, {
      "url": "http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-directReferenceCode",
      "valueCoding": {
        "system": "http://smart.who.int/hiv/CodeSystem/HIVConcepts",
        "code": "HIV.A.DE21",
        "display": "Transgender male"
      }
    }, {
      "url": "http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-directReferenceCode",
      "valueCoding": {
        "system": "http://smart.who.int/hiv/CodeSystem/HIVConcepts",
        "code": "HIV.A.DE23",
        "display": "Other"
      }
    }, {
      "url": "http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-directReferenceCode",
      "valueCoding": {
        "system": "http://smart.who.int/hiv/CodeSystem/HIVConcepts",
        "code": "HIV.B.DE49",
        "display": "Key population member*"
      }
    }, {
      "url": "http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-directReferenceCode",
      "valueCoding": {
        "system": "http://terminology.hl7.org/CodeSystem/observation-category",
        "code": "social-history",
        "display": "Social History"
      }
    }, {
      "url": "http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-logicDefinition",
      "extension": [ {
        "url": "libraryName",
        "valueString": "HIVElements"
      }, {
        "url": "name",
        "valueString": "HIV Status Positive Condition"
      }, {
        "url": "statement",
        "valueString": "define \"HIV Status Positive Condition\":\n  [Condition: Concepts.\"HIV-positive - HIV.B.DE116\"] C\n    where C.clinicalStatus ~ ConceptsCustom.\"active\"\n      and exists(C.category CC where CC ~ ConceptsCustom.\"encounter-diagnosis\")\n    sort by start of onset.toInterval()"
      }, {
        "url": "displaySequence",
        "valueInteger": 0
      } ]
    }, {
      "url": "http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-logicDefinition",
      "extension": [ {
        "url": "libraryName",
        "valueString": "HIVIndicatorElements"
      }, {
        "url": "name",
        "valueString": "HIV Status Positive Condition"
      }, {
        "url": "statement",
        "valueString": "define \"HIV Status Positive Condition\":\n  Elements.\"HIV Status Positive Condition\" C\n  where C.onset before end of \"Measurement Period\""
      }, {
        "url": "displaySequence",
        "valueInteger": 1
      } ]
    }, {
      "url": "http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-logicDefinition",
      "extension": [ {
        "url": "libraryName",
        "valueString": "HIVElements"
      }, {
        "url": "name",
        "valueString": "HIV Status Observation"
      }, {
        "url": "statement",
        "valueString": "/* End of HIV-inconclusive */\n\n/*\n@dataElement: HIV.B.DE115 - HIV status\n@activity: HIV.B7 Test for HIV using testing algorithm\n@description: HIV status reported after applying the national HIV testing algorithm. No single HIV test can provide an HIV-positive diagnosis.\n*/\ndefine \"HIV Status Observation\":\n  [Observation: Concepts.\"HIV status\"] O\n    where O.status in { 'final', 'amended', 'corrected' }"
      }, {
        "url": "displaySequence",
        "valueInteger": 2
      } ]
    }, {
      "url": "http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-logicDefinition",
      "extension": [ {
        "url": "libraryName",
        "valueString": "HIVElements"
      }, {
        "url": "name",
        "valueString": "HIV Status Positive Observation"
      }, {
        "url": "statement",
        "valueString": "define \"HIV Status Positive Observation\":\n\"HIV Status Observation\" O\n    where O.value ~ Concepts.\"HIV-positive - HIV.B.DE116\"\n      sort by start of effective.toInterval()"
      }, {
        "url": "displaySequence",
        "valueInteger": 3
      } ]
    }, {
      "url": "http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-logicDefinition",
      "extension": [ {
        "url": "libraryName",
        "valueString": "HIVIndicatorElements"
      }, {
        "url": "name",
        "valueString": "HIV Status Positive Observation"
      }, {
        "url": "statement",
        "valueString": "define \"HIV Status Positive Observation\":\n  Elements.\"HIV Status Positive Observation\" O\n  where O.issued before end of \"Measurement Period\"\n  or O.effective.toInterval() starts before end of \"Measurement Period\""
      }, {
        "url": "displaySequence",
        "valueInteger": 4
      } ]
    }, {
      "url": "http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-logicDefinition",
      "extension": [ {
        "url": "libraryName",
        "valueString": "HIVIndicatorElements"
      }, {
        "url": "name",
        "valueString": "Has HIV-positive Status"
      }, {
        "url": "statement",
        "valueString": "define \"Has HIV-positive Status\":\n  exists \"HIV Status Positive Condition\"\n  or exists \"HIV Status Positive Observation\""
      }, {
        "url": "displaySequence",
        "valueInteger": 5
      } ]
    }, {
      "url": "http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-logicDefinition",
      "extension": [ {
        "url": "libraryName",
        "valueString": "HIVElements"
      }, {
        "url": "name",
        "valueString": "On ART H.DE47"
      }, {
        "url": "statement",
        "valueString": "/* End of Refused stopped treatment */\n\n/*\n@dataElement: HIV.H.DE47 - On ART\n@activity: HIV.H3 Record outreach and result\n@description: Client is currently taking ART \n*/\n\ndefine \"On ART H.DE47\":\n    [MedicationStatement] MS\n    where exists(MS.reasonCode C where C ~ Concepts.\"On ART - HIV.H.DE47\")\n    sort by start of effective.toInterval()"
      }, {
        "url": "displaySequence",
        "valueInteger": 6
      } ]
    }, {
      "url": "http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-logicDefinition",
      "extension": [ {
        "url": "libraryName",
        "valueString": "HIVIndicatorElements"
      }, {
        "url": "name",
        "valueString": "On ART H.DE47"
      }, {
        "url": "statement",
        "valueString": "/* End of Refused stopped treatment */\n\n/*\n@dataElement: HIV.H.DE47 - On ART\n@activity: HIV.H3 Record outreach and result\n@description: Client is currently taking ART \n*/\ndefine \"On ART H.DE47\":\n  exists(Elements.\"On ART H.DE47\" ART\n   where ART.effective.toInterval() starts before end of \"Measurement Period\"\n    and (ART.effective.toInterval() ends after start of \"Measurement Period\")\n   )"
      }, {
        "url": "displaySequence",
        "valueInteger": 7
      } ]
    }, {
      "url": "http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-logicDefinition",
      "extension": [ {
        "url": "libraryName",
        "valueString": "HIVElements"
      }, {
        "url": "name",
        "valueString": "On ART D.DE38"
      }, {
        "url": "statement",
        "valueString": "/* End of Serodiscordant partner D.DE37 */\n\n/*\n@dataElement: HIV.D.DE38 - On ART\n@activity: HIV.D8 Capture or update client history\n@description: Client is currently taking ART\n*/\n\ndefine \"On ART D.DE38\":\n    [MedicationStatement] MS\n    where exists(MS.reasonCode C where C ~ Concepts.\"On ART - HIV.D.DE38\")\n    sort by start of effective.toInterval()"
      }, {
        "url": "displaySequence",
        "valueInteger": 8
      } ]
    }, {
      "url": "http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-logicDefinition",
      "extension": [ {
        "url": "libraryName",
        "valueString": "HIVElements"
      }, {
        "url": "name",
        "valueString": "First On ART"
      }, {
        "url": "statement",
        "valueString": "define \"First On ART\":\n  (First(\"On ART D.DE38\"))"
      }, {
        "url": "displaySequence",
        "valueInteger": 9
      } ]
    }, {
      "url": "http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-logicDefinition",
      "extension": [ {
        "url": "libraryName",
        "valueString": "HIVElements"
      }, {
        "url": "name",
        "valueString": "Viral load test result D.DE387"
      }, {
        "url": "statement",
        "valueString": "/* End of Time to start ART */\n\n/*\n@dataElement: HIV.D.DE387 - Viral load test result\n@activity: HIV.D20 Diagnostics\n@description: Result from the viral load test in number of copies/mL\n*/\n\ndefine \"Viral load test result D.DE387\":\n  [Observation: Concepts.\"Viral load test result - HIV.D.DE387\"] O\n    where O.status in { 'final', 'amended', 'corrected' }"
      }, {
        "url": "displaySequence",
        "valueInteger": 10
      } ]
    }, {
      "url": "http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-logicDefinition",
      "extension": [ {
        "url": "libraryName",
        "valueString": "HIVIndicatorElements"
      }, {
        "url": "name",
        "valueString": "Viral load test result D.DE387"
      }, {
        "url": "statement",
        "valueString": "/* End of Date of baseline CD4 count test D.DE368 */\n\n/*\n@dataElement: HIV.D.DE387 - Viral load test result\n@activity: HIV.D20 Diagnostics\n@description: Result from the viral load test in number of copies/mL\n*/\n\ndefine \"Viral load test result D.DE387\":\n  Elements.\"Viral load test result D.DE387\" O\n    where O.effective.toInterval() during \"Measurement Period\""
      }, {
        "url": "displaySequence",
        "valueInteger": 11
      } ]
    }, {
      "url": "http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-logicDefinition",
      "extension": [ {
        "url": "libraryName",
        "valueString": "HIVElements"
      }, {
        "url": "name",
        "valueString": "routine viral load sample collection"
      }, {
        "url": "statement",
        "valueString": "define \"routine viral load sample collection\":\n  [Procedure] P\n  where P.status = 'completed'\n  and P.code ~ ConceptsCustom.\"viral load test\"\n  and exists(P.reasonCode RC where RC ~ Concepts.\"Routine viral load test\")"
      }, {
        "url": "displaySequence",
        "valueInteger": 12
      } ]
    }, {
      "url": "http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-logicDefinition",
      "extension": [ {
        "url": "libraryName",
        "valueString": "HIVIND29Logic"
      }, {
        "url": "name",
        "valueString": "Numerator"
      }, {
        "url": "statement",
        "valueString": "/**\n * Numerator\n * \n * Definition: Number of people living with HIV on ART for at least six months and with at least one routine VL test result who have virological suppression (<1000 copies/mL*) during the reporting period.\n * Calculation: COUNT of clients with \"HIV status\"='HIV-positive' AND \"On ART\"=True and \"ART start date\" GREATER THAN 6 months before reporting period end date AND \"Date of viral load sample collection\" within reporting period AND \"Reason for HIV viral load test\"='Routine viral load test' AND \"Viral load test result\" LESS THAN 1000 copies/mL\n */\n\ndefine \"Numerator\":\n HIE.\"Has HIV-positive Status\"\n  and HIE.\"On ART H.DE47\"\n  and \n   (months between (end of \"Measurement Period\") and (date from start of HE.\"First On ART\".effective.toInterval()) > 6 months)\n   and \n   exists(\n    HIE.\"Viral load test result D.DE387\" VL\n    with HE.\"routine viral load sample collection\" P \n    such that VL.partOf.references(P) and P.performed.toInterval() during \"Measurement Period\"\n    where VL.value < 1000\n    )"
      }, {
        "url": "displaySequence",
        "valueInteger": 13
      } ]
    }, {
      "url": "http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-logicDefinition",
      "extension": [ {
        "url": "libraryName",
        "valueString": "HIVIND29Logic"
      }, {
        "url": "name",
        "valueString": "Denominator"
      }, {
        "url": "statement",
        "valueString": "/**\n * Denominator\n *\n * Definition: Number of people living with HIV on ART at least six months with at least one routine VL result in a medical or laboratory record during the reporting period, to monitor progress towards the third 95 target |  | In addition, this can also be presented as the number with suppressed VL among all people living with HIV to calculate population-level viral suppression.\n * Calculation: COUNT of clients with \"HIV status\"='HIV-positive' AND \"On ART\"=True and \"ART start date\" GREATER THAN 6 months before reporting period end date AND \"Date of viral load sample collection\" within reporting period AND \"Reason for HIV viral load test\"='Routine viral load test'\n */\n\ndefine \"Denominator\":\n HIE.\"Has HIV-positive Status\"\n  and HIE.\"On ART H.DE47\"\n  and \n   (months between (end of \"Measurement Period\") and (date from start of HE.\"First On ART\".effective.toInterval()) > 6 months)\n   and \n   exists(\n    HIE.\"Viral load test result D.DE387\" VL\n    with HE.\"routine viral load sample collection\" P \n    such that VL.partOf.references(P) and P.performed.toInterval() during \"Measurement Period\"\n    )"
      }, {
        "url": "displaySequence",
        "valueInteger": 14
      } ]
    }, {
      "url": "http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-logicDefinition",
      "extension": [ {
        "url": "libraryName",
        "valueString": "HIVIND29Logic"
      }, {
        "url": "name",
        "valueString": "Initial Population"
      }, {
        "url": "statement",
        "valueString": "/* Populations */\n\n/*\n *Initial Population\n */\n\ndefine \"Initial Population\":\n  true"
      }, {
        "url": "displaySequence",
        "valueInteger": 15
      } ]
    }, {
      "url": "http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-logicDefinition",
      "extension": [ {
        "url": "libraryName",
        "valueString": "HIVIndicatorElements"
      }, {
        "url": "name",
        "valueString": "By Administrative Gender Stratifier"
      }, {
        "url": "statement",
        "valueString": "/* End of Age */\n\n\n\n\n\n\n/*\n@dataElement: HIV.A.DE18 - Gender\n@activity: HIV.A6.1 Review sociodemographic data with client | HIV.A5 Create new client record\n@description: Gender of the client\n*/\n\n/*\n * By Administrative Gender of Patient Stratifier\n * Need to expand codes\n */\n\ndefine \"By Administrative Gender Stratifier\":\n  case \n      when Patient.gender = 'male' then Concepts.\"Male\"\n      when Patient.gender = 'female' then Concepts.\"Female\"\n      when Patient.gender = 'transgender female' then Concepts.\"Transgender female\"\n      when Patient.gender = 'transgender male' then Concepts.\"Transgender male\"\n      else Concepts.\"Other - HIV.A.DE23\"\n  end"
      }, {
        "url": "displaySequence",
        "valueInteger": 16
      } ]
    }, {
      "url": "http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-logicDefinition",
      "extension": [ {
        "url": "libraryName",
        "valueString": "HIVIndicatorElements"
      }, {
        "url": "name",
        "valueString": "Age In Years"
      }, {
        "url": "statement",
        "valueString": "/* End of Visit date A.DE3 */\n\n/*\n@dataElement: HIV.A.DE17 - Age\n@activity: HIV.A6.1 Review sociodemographic data with client | HIV.A5 Create new client record\n@description: Calculated age (number of years) of the client based on date of birth\n*/\ndefine \"Age In Years\":\n  AgeInYearsAt(start of \"Measurement Period\")"
      }, {
        "url": "displaySequence",
        "valueInteger": 17
      } ]
    }, {
      "url": "http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-logicDefinition",
      "extension": [ {
        "url": "libraryName",
        "valueString": "HIVIndicatorElements"
      }, {
        "url": "name",
        "valueString": "By Age Stratifier"
      }, {
        "url": "statement",
        "valueString": "/*\n * By Age Stratifiers\n * (0–4, 5–9, 10–14, 15–19, 20–24, 25–29, 30–34, 35–39, 40–44, 45–49, 50+ years)\n * \n */\ndefine \"By Age Stratifier\":\n  case \n      when \"Age In Years\" <= 4 then '0-4'\n      when \"Age In Years\" <= 9 then '5-9'\n      when \"Age In Years\" <= 14 then '10–14'\n      when \"Age In Years\" <= 19 then '15–19'\n      when \"Age In Years\" <= 24 then '20–24'\n      when \"Age In Years\" <= 29 then '25–29'\n      when \"Age In Years\" <= 34 then '30–34'\n      when \"Age In Years\" <= 39 then '35–39'\n      when \"Age In Years\" <= 44 then '40–44'\n      when \"Age In Years\" <= 49 then '45–49'\n      when \"Age In Years\" >= 50 then '50+'\n      else null\n  end"
      }, {
        "url": "displaySequence",
        "valueInteger": 18
      } ]
    }, {
      "url": "http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-logicDefinition",
      "extension": [ {
        "url": "libraryName",
        "valueString": "HIVIndicatorElements"
      }, {
        "url": "name",
        "valueString": "By Geographic Region Stratifier"
      }, {
        "url": "statement",
        "valueString": "// Geographic Region\ndefine \"By Geographic Region Stratifier\":\n    First(Patient.address A where A.use in { 'home' }).state"
      }, {
        "url": "displaySequence",
        "valueInteger": 19
      } ]
    }, {
      "url": "http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-logicDefinition",
      "extension": [ {
        "url": "libraryName",
        "valueString": "HIVElements"
      }, {
        "url": "name",
        "valueString": "Key population member type Observation"
      }, {
        "url": "statement",
        "valueString": "/* End of Key population member B.DE49 */\n\n/*\n@dataElement: HIV.B.DE50 - Key population member type\n@activity: HIV.B6 Capture or update client history\n@description: The type of key population that the client is included in\n*/\ndefine \"Key population member type Observation\":\n  [Observation: Concepts.\"Key population member - HIV.B.DE49\"] O\n    where O.status in { 'final', 'amended', 'corrected' }\n    and exists(O.category OC where OC ~ ConceptsCustom.\"social-history\")"
      }, {
        "url": "displaySequence",
        "valueInteger": 20
      } ]
    }, {
      "url": "http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-logicDefinition",
      "extension": [ {
        "url": "libraryName",
        "valueString": "HIVIndicatorElements"
      }, {
        "url": "name",
        "valueString": "Key population member type Observation"
      }, {
        "url": "statement",
        "valueString": "define \"Key population member type Observation\":\n  Elements.\"Key population member type Observation\" O\n    where O.effective.toInterval() before end of \"Measurement Period\"\n    or O.issued before end of \"Measurement Period\""
      }, {
        "url": "displaySequence",
        "valueInteger": 21
      } ]
    }, {
      "url": "http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-logicDefinition",
      "extension": [ {
        "url": "libraryName",
        "valueString": "HIVIndicatorElements"
      }, {
        "url": "name",
        "valueString": "patientGroups"
      }, {
        "url": "statement",
        "valueString": "// Stratifier\ndefine patientGroups:\n  \"Key population member type Observation\" O\n  return Combine(O.code.coding.code, ':')"
      }, {
        "url": "displaySequence",
        "valueInteger": 22
      } ]
    }, {
      "url": "http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-logicDefinition",
      "extension": [ {
        "url": "libraryName",
        "valueString": "HIVIND29Logic"
      }, {
        "url": "name",
        "valueString": "Stratification"
      }, {
        "url": "statement",
        "valueString": "define \"Stratification\":\n HIE.\"By Administrative Gender Stratifier\".code \n  + ':' + HIE.\"By Age Stratifier\"\n+ ':' + HIE.\"By Geographic Region Stratifier\"\n+ Combine(HIE.patientGroups, ':')"
      }, {
        "url": "displaySequence",
        "valueInteger": 23
      } ]
    }, {
      "url": "http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-logicDefinition",
      "extension": [ {
        "url": "libraryName",
        "valueString": "FHIRHelpers"
      }, {
        "url": "name",
        "valueString": "ToConcept"
      }, {
        "url": "statement",
        "valueString": "define function ToConcept(concept FHIR.CodeableConcept):\n    if concept is null then\n        null\n    else\n        System.Concept {\n            codes: concept.coding C return ToCode(C),\n            display: concept.text.value\n        }"
      }, {
        "url": "displaySequence",
        "valueInteger": 24
      } ]
    }, {
      "url": "http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-logicDefinition",
      "extension": [ {
        "url": "libraryName",
        "valueString": "FHIRHelpers"
      }, {
        "url": "name",
        "valueString": "ToDateTime"
      }, {
        "url": "statement",
        "valueString": "define function ToDateTime(value dateTime): value.value"
      }, {
        "url": "displaySequence",
        "valueInteger": 25
      } ]
    }, {
      "url": "http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-logicDefinition",
      "extension": [ {
        "url": "libraryName",
        "valueString": "FHIRHelpers"
      }, {
        "url": "name",
        "valueString": "ToString"
      }, {
        "url": "statement",
        "valueString": "define function ToString(value ObservationStatus): value.value"
      }, {
        "url": "displaySequence",
        "valueInteger": 26
      } ]
    }, {
      "url": "http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-logicDefinition",
      "extension": [ {
        "url": "libraryName",
        "valueString": "FHIRHelpers"
      }, {
        "url": "name",
        "valueString": "ToDateTime"
      }, {
        "url": "statement",
        "valueString": "define function ToDateTime(value instant): value.value"
      }, {
        "url": "displaySequence",
        "valueInteger": 27
      } ]
    }, {
      "url": "http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-logicDefinition",
      "extension": [ {
        "url": "libraryName",
        "valueString": "FHIRHelpers"
      }, {
        "url": "name",
        "valueString": "ToString"
      }, {
        "url": "statement",
        "valueString": "define function ToString(value ProcedureStatus): value.value"
      }, {
        "url": "displaySequence",
        "valueInteger": 28
      } ]
    }, {
      "url": "http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-logicDefinition",
      "extension": [ {
        "url": "libraryName",
        "valueString": "WHOCommon"
      }, {
        "url": "name",
        "valueString": "references"
      }, {
        "url": "statement",
        "valueString": "/*\n@description: Returns true if any of the given references are to the given resource\n@comment: Returns true if the `id` element of the given resource exactly equals the tail of any of the given references.\nNOTE: This function assumes resources from the same source server.\n*/\ndefine fluent function references(references List<FHIR.Reference>, resource FHIR.Resource):\n  exists (references R where R.references(resource))"
      }, {
        "url": "displaySequence",
        "valueInteger": 29
      } ]
    }, {
      "url": "http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-logicDefinition",
      "extension": [ {
        "url": "libraryName",
        "valueString": "WHOCommon"
      }, {
        "url": "name",
        "valueString": "references"
      }, {
        "url": "statement",
        "valueString": "/*\n@description: Returns true if the given reference is to the given resource\n@comment: Returns true if the `id` element of the given resource exactly equals the tail of the given reference.\nNOTE: This function assumes resources from the same source server.\n*/\ndefine fluent function references(reference FHIR.Reference, resource FHIR.Resource):\n  resource.id = Last(Split(reference.reference, '/'))"
      }, {
        "url": "displaySequence",
        "valueInteger": 30
      } ]
    }, {
      "url": "http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-logicDefinition",
      "extension": [ {
        "url": "libraryName",
        "valueString": "FHIRHelpers"
      }, {
        "url": "name",
        "valueString": "ToString"
      }, {
        "url": "statement",
        "valueString": "define function ToString(value string): value.value"
      }, {
        "url": "displaySequence",
        "valueInteger": 31
      } ]
    }, {
      "url": "http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-logicDefinition",
      "extension": [ {
        "url": "libraryName",
        "valueString": "FHIRHelpers"
      }, {
        "url": "name",
        "valueString": "ToInteger"
      }, {
        "url": "statement",
        "valueString": "define function ToInteger(value integer): value.value"
      }, {
        "url": "displaySequence",
        "valueInteger": 32
      } ]
    }, {
      "url": "http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-logicDefinition",
      "extension": [ {
        "url": "libraryName",
        "valueString": "FHIRHelpers"
      }, {
        "url": "name",
        "valueString": "ToString"
      }, {
        "url": "statement",
        "valueString": "define function ToString(value AdministrativeGender): value.value"
      }, {
        "url": "displaySequence",
        "valueInteger": 33
      } ]
    }, {
      "url": "http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-logicDefinition",
      "extension": [ {
        "url": "libraryName",
        "valueString": "FHIRHelpers"
      }, {
        "url": "name",
        "valueString": "ToString"
      }, {
        "url": "statement",
        "valueString": "define function ToString(value AddressUse): value.value"
      }, {
        "url": "displaySequence",
        "valueInteger": 34
      } ]
    } ],
    "name": "EffectiveDataRequirements",
    "status": "active",
    "type": {
      "coding": [ {
        "system": "http://terminology.hl7.org/CodeSystem/library-type",
        "code": "module-definition"
      } ]
    },
    "relatedArtifact": [ {
      "type": "depends-on",
      "display": "Library HIE",
      "resource": "Library/HIVIndicatorElements"
    }, {
      "type": "depends-on",
      "display": "Library Elements",
      "resource": "Library/HIVElements"
    }, {
      "type": "depends-on",
      "display": "Library Concepts",
      "resource": "Library/HIVConcepts"
    }, {
      "type": "depends-on",
      "display": "Library FHIRHelpers",
      "resource": "Library/FHIRHelpers|4.0.1"
    }, {
      "type": "depends-on",
      "display": "Library ConceptsCustom",
      "resource": "Library/HIVConceptsCustom"
    }, {
      "type": "depends-on",
      "display": "Library WC",
      "resource": "Library/WHOCommon"
    }, {
      "type": "depends-on",
      "display": "Library FHIRHelpers",
      "resource": "Library/FHIRHelpers|4.0.1"
    }, {
      "type": "depends-on",
      "display": "Library WC",
      "resource": "Library/WHOCommon"
    }, {
      "type": "depends-on",
      "display": "Library WCom",
      "resource": "Library/WHOCommon"
    }, {
      "type": "depends-on",
      "display": "Library HE",
      "resource": "Library/HIVElements"
    }, {
      "type": "depends-on",
      "display": "Library FHIRHelpers",
      "resource": "Library/FHIRHelpers|4.0.1"
    }, {
      "type": "depends-on",
      "display": "Library FHIRHelpers",
      "resource": "Library/FHIRHelpers|4.0.1"
    }, {
      "type": "depends-on",
      "display": "Library Concepts",
      "resource": "Library/HIVConcepts"
    }, {
      "type": "depends-on",
      "display": "Code system HIVConcepts",
      "resource": "http://smart.who.int/hiv/CodeSystem/HIVConcepts"
    }, {
      "type": "depends-on",
      "display": "Code system ConditionClinicalStatusCodes",
      "resource": "http://terminology.hl7.org/CodeSystem/condition-clinical"
    }, {
      "type": "depends-on",
      "display": "Code system ConditionCategoryCodes",
      "resource": "http://terminology.hl7.org/CodeSystem/condition-category"
    }, {
      "type": "depends-on",
      "display": "Code system missing concepts",
      "resource": "missing concepts"
    }, {
      "type": "depends-on",
      "display": "Code system ObservationCategoryCodes",
      "resource": "http://terminology.hl7.org/CodeSystem/observation-category"
    } ],
    "parameter": [ {
      "name": "Measurement Period",
      "use": "in",
      "min": 0,
      "max": "1",
      "type": "Period"
    }, {
      "name": "Numerator",
      "use": "out",
      "min": 0,
      "max": "1",
      "type": "boolean"
    }, {
      "name": "Denominator",
      "use": "out",
      "min": 0,
      "max": "1",
      "type": "boolean"
    }, {
      "name": "Initial Population",
      "use": "out",
      "min": 0,
      "max": "1",
      "type": "boolean"
    }, {
      "name": "Stratification",
      "use": "out",
      "min": 0,
      "max": "1",
      "type": "string"
    } ],
    "dataRequirement": [ {
      "type": "Condition",
      "profile": [ "http://hl7.org/fhir/StructureDefinition/Condition" ],
      "mustSupport": [ "code", "clinicalStatus", "category" ],
      "codeFilter": [ {
        "path": "code",
        "code": [ {
          "system": "http://smart.who.int/hiv/CodeSystem/HIVConcepts",
          "code": "HIV.B.DE116",
          "display": "HIV-positive"
        } ]
      } ]
    }, {
      "type": "Condition",
      "profile": [ "http://hl7.org/fhir/StructureDefinition/Condition" ],
      "mustSupport": [ "code", "clinicalStatus", "category", "onset" ],
      "codeFilter": [ {
        "path": "code",
        "code": [ {
          "system": "http://smart.who.int/hiv/CodeSystem/HIVConcepts",
          "code": "HIV.B.DE116",
          "display": "HIV-positive"
        } ]
      } ]
    }, {
      "type": "Observation",
      "profile": [ "http://hl7.org/fhir/StructureDefinition/Observation" ],
      "mustSupport": [ "code", "status" ],
      "codeFilter": [ {
        "path": "code",
        "code": [ {
          "system": "http://smart.who.int/hiv/CodeSystem/HIVConcepts",
          "code": "HIV.B.DE115",
          "display": "HIV status"
        } ]
      } ]
    }, {
      "type": "Observation",
      "profile": [ "http://hl7.org/fhir/StructureDefinition/Observation" ],
      "mustSupport": [ "code", "status", "value" ],
      "codeFilter": [ {
        "path": "code",
        "code": [ {
          "system": "http://smart.who.int/hiv/CodeSystem/HIVConcepts",
          "code": "HIV.B.DE115",
          "display": "HIV status"
        } ]
      } ]
    }, {
      "type": "Observation",
      "profile": [ "http://hl7.org/fhir/StructureDefinition/Observation" ],
      "mustSupport": [ "code", "status", "value", "issued", "effective" ],
      "codeFilter": [ {
        "path": "code",
        "code": [ {
          "system": "http://smart.who.int/hiv/CodeSystem/HIVConcepts",
          "code": "HIV.B.DE115",
          "display": "HIV status"
        } ]
      } ]
    }, {
      "type": "MedicationStatement",
      "profile": [ "http://hl7.org/fhir/StructureDefinition/MedicationStatement" ],
      "mustSupport": [ "reasonCode" ]
    }, {
      "type": "MedicationStatement",
      "profile": [ "http://hl7.org/fhir/StructureDefinition/MedicationStatement" ],
      "mustSupport": [ "reasonCode", "effective" ]
    }, {
      "type": "MedicationStatement",
      "profile": [ "http://hl7.org/fhir/StructureDefinition/MedicationStatement" ],
      "mustSupport": [ "reasonCode" ]
    }, {
      "type": "Observation",
      "profile": [ "http://hl7.org/fhir/StructureDefinition/Observation" ],
      "mustSupport": [ "code", "status" ],
      "codeFilter": [ {
        "path": "code",
        "code": [ {
          "system": "http://smart.who.int/hiv/CodeSystem/HIVConcepts",
          "code": "HIV.D.DE387",
          "display": "Viral load test result"
        } ]
      } ]
    }, {
      "type": "Observation",
      "profile": [ "http://hl7.org/fhir/StructureDefinition/Observation" ],
      "mustSupport": [ "code", "status", "effective" ],
      "codeFilter": [ {
        "path": "code",
        "code": [ {
          "system": "http://smart.who.int/hiv/CodeSystem/HIVConcepts",
          "code": "HIV.D.DE387",
          "display": "Viral load test result"
        } ]
      } ]
    }, {
      "type": "Procedure",
      "profile": [ "http://hl7.org/fhir/StructureDefinition/Procedure" ],
      "mustSupport": [ "status", "code", "reasonCode" ]
    }, {
      "type": "Procedure",
      "profile": [ "http://hl7.org/fhir/StructureDefinition/Procedure" ],
      "mustSupport": [ "status", "code", "reasonCode", "performed" ]
    }, {
      "type": "Observation",
      "profile": [ "http://hl7.org/fhir/StructureDefinition/Observation" ],
      "mustSupport": [ "code", "status", "effective", "partOf", "value" ],
      "codeFilter": [ {
        "path": "code",
        "code": [ {
          "system": "http://smart.who.int/hiv/CodeSystem/HIVConcepts",
          "code": "HIV.D.DE387",
          "display": "Viral load test result"
        } ]
      } ]
    }, {
      "type": "Procedure",
      "profile": [ "http://hl7.org/fhir/StructureDefinition/Procedure" ],
      "mustSupport": [ "status", "code", "reasonCode", "performed" ]
    }, {
      "type": "Observation",
      "profile": [ "http://hl7.org/fhir/StructureDefinition/Observation" ],
      "mustSupport": [ "code", "status", "effective", "partOf" ],
      "codeFilter": [ {
        "path": "code",
        "code": [ {
          "system": "http://smart.who.int/hiv/CodeSystem/HIVConcepts",
          "code": "HIV.D.DE387",
          "display": "Viral load test result"
        } ]
      } ]
    }, {
      "type": "Patient",
      "profile": [ "http://hl7.org/fhir/StructureDefinition/Patient" ]
    }, {
      "type": "Patient",
      "profile": [ "http://hl7.org/fhir/StructureDefinition/Patient" ],
      "mustSupport": [ "use" ]
    }, {
      "type": "Observation",
      "profile": [ "http://hl7.org/fhir/StructureDefinition/Observation" ],
      "mustSupport": [ "code", "status", "category" ],
      "codeFilter": [ {
        "path": "code",
        "code": [ {
          "system": "http://smart.who.int/hiv/CodeSystem/HIVConcepts",
          "code": "HIV.B.DE49",
          "display": "Key population member*"
        } ]
      } ]
    }, {
      "type": "Observation",
      "profile": [ "http://hl7.org/fhir/StructureDefinition/Observation" ],
      "mustSupport": [ "code", "status", "category", "effective", "issued" ],
      "codeFilter": [ {
        "path": "code",
        "code": [ {
          "system": "http://smart.who.int/hiv/CodeSystem/HIVConcepts",
          "code": "HIV.B.DE49",
          "display": "Key population member*"
        } ]
      } ]
    }, {
      "type": "Observation",
      "profile": [ "http://hl7.org/fhir/StructureDefinition/Observation" ],
      "mustSupport": [ "code", "status", "category", "effective", "issued", "code.coding" ],
      "codeFilter": [ {
        "path": "code",
        "code": [ {
          "system": "http://smart.who.int/hiv/CodeSystem/HIVConcepts",
          "code": "HIV.B.DE49",
          "display": "Key population member*"
        } ]
      } ]
    }, {
      "type": "MedicationStatement",
      "profile": [ "http://hl7.org/fhir/StructureDefinition/MedicationStatement" ],
      "mustSupport": [ "reasonCode" ]
    } ]
  } ],
  "extension": [ {
    "url": "http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-populationBasis",
    "valueCode": "boolean"
  }, {
    "url": "http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-softwaresystem",
    "valueReference": {
      "reference": "Device/cqf-tooling"
    }
  }, {
    "id": "effective-data-requirements",
    "url": "http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-effectiveDataRequirements",
    "valueReference": {
      "reference": "#effective-data-requirements"
    }
  } ],
  "url": "http://smart.who.int/hiv/Measure/HIVIND29",
  "name": "HIVIND29",
  "title": "HIV.IND.29 People living with HIV on ART who have suppressed viral load",
  "status": "draft",
  "experimental": true,
  "date": "2024-09-15",
  "publisher": "World Health Organization (WHO)",
  "description": "% of people living with HIV on ART (for at least six months) who have virological suppression",
  "library": [ "http://smart.who.int/hiv/Library/HIVIND29Logic" ],
  "scoring": {
    "coding": [ {
      "system": "http://terminology.hl7.org/CodeSystem/measure-scoring",
      "code": "proportion",
      "display": "Proportion"
    } ]
  },
  "group": [ {
    "population": [ {
      "id": "HIV.IND.29.IP",
      "code": {
        "coding": [ {
          "system": "http://terminology.hl7.org/CodeSystem/measure-population",
          "code": "initial-population",
          "display": "Initial Population"
        } ]
      },
      "description": "Initial Population",
      "criteria": {
        "language": "text/cql",
        "expression": "Initial Population"
      }
    }, {
      "id": "HIV.IND.29.DEN",
      "code": {
        "coding": [ {
          "system": "http://terminology.hl7.org/CodeSystem/measure-population",
          "code": "denominator",
          "display": "Denominator"
        } ]
      },
      "description": "Number of people living with HIV on ART at least six months with at least one routine VL result in a medical or laboratory record during the reporting period, to monitor progress towards the third 95 target |  | In addition, this can also be presented as the number with suppressed VL among all people living with HIV to calculate population-level viral suppression.",
      "criteria": {
        "language": "text/cql",
        "expression": "Denominator"
      }
    }, {
      "id": "HIV.IND.29.NUM",
      "code": {
        "coding": [ {
          "system": "http://terminology.hl7.org/CodeSystem/measure-population",
          "code": "numerator",
          "display": "Numerator"
        } ]
      },
      "description": "Number of people living with HIV on ART for at least six months and with at least one routine VL test result who have virological suppression (<1000 copies/mL) during the reporting period.",
      "criteria": {
        "language": "text/cql",
        "expression": "Numerator"
      }
    } ],
    "stratifier": [ {
      "id": "HIV.IND.29.S",
      "criteria": {
        "language": "text/cql",
        "expression": "Stratification"
      }
    } ]
  } ]
}